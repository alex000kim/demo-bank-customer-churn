schema: '2.0'
stages:
  data_split:
    cmd: python src/stages/data_split.py --config=params.yaml
    deps:
    - path: data/raw
      hash: md5
      md5: f2da2d61aab2b6979a6d8571c98277d8.dir
      size: 805409
      nfiles: 3
    - path: src/stages/data_split.py
      md5: 9fbed283d435189303ad63ed525ac366
      size: 1435
    params:
      params.yaml:
        base:
          project: bank_customer_churn
          raw_data_dir: data/raw
          countries:
          - France
          - Spain
          - Germany
          feat_cols:
          - CreditScore
          - Age
          - Tenure
          - Balance
          - NumOfProducts
          - HasCrCard
          - IsActiveMember
          - EstimatedSalary
          targ_col: Exited
          random_state: 42
        data_split:
          test_size: 0.15
          processed_data_dir: data/processed
    outs:
    - path: data/processed
      hash: md5
      md5: 6c4e14e50302a8141ee33e681d4353c4.dir
      size: 1204056
      nfiles: 4
  train:
    cmd: python src/stages/train.py --config=params.yaml
    deps:
    - path: data/processed
      hash: md5
      md5: 6c4e14e50302a8141ee33e681d4353c4.dir
      size: 1204056
      nfiles: 4
    - path: src/stages/train.py
      hash: md5
      md5: 4d9d5b1f0295e7b3deb1e614f79c774a
      size: 1947
    params:
      params.yaml:
        base:
          project: bank_customer_churn
          raw_data_dir: data/raw
          countries:
          - France
          - Spain
          - Germany
          feat_cols:
          - CreditScore
          - Age
          - Tenure
          - Balance
          - NumOfProducts
          - HasCrCard
          - IsActiveMember
          - EstimatedSalary
          targ_col: Exited
          random_state: 42
        train:
          model_type: randomforest
          model_dir: models
          model_path: models/clf-model.joblib
          params:
            n_estimators: 150
            max_depth: 30
    outs:
    - path: models/clf-model.joblib
      hash: md5
      md5: 738b428b9ac025ba0255e389f6aee934
      size: 31541656
  eval:
    cmd: python src/stages/eval.py --config=params.yaml
    deps:
    - path: data/processed
      hash: md5
      md5: 6c4e14e50302a8141ee33e681d4353c4.dir
      size: 1204056
      nfiles: 4
    - path: models/clf-model.joblib
      hash: md5
      md5: 738b428b9ac025ba0255e389f6aee934
      size: 31541656
    - path: src/stages/eval.py
      md5: 5dc0b6e6bdf436234530ccb3657cb12a
      size: 2431
    params:
      params.yaml:
        base:
          project: bank_customer_churn
          raw_data_dir: data/raw
          countries:
          - France
          - Spain
          - Germany
          feat_cols:
          - CreditScore
          - Age
          - Tenure
          - Balance
          - NumOfProducts
          - HasCrCard
          - IsActiveMember
          - EstimatedSalary
          targ_col: Exited
          random_state: 42
        data_split:
          test_size: 0.15
          processed_data_dir: data/processed
        train:
          model_type: randomforest
          model_dir: models
          model_path: models/clf-model.joblib
          params:
            n_estimators: 150
            max_depth: 30
    outs:
    - path: metrics.json
      hash: md5
      md5: 7460877bb4857bcd26ab4825b9691a40
      size: 67
    - path: reports/feat_imp.csv
      hash: md5
      md5: a5ebe312480a44d9ad9d0dc7bc81d2b3
      size: 185
    - path: reports/figures/cm.png
      hash: md5
      md5: fc9ac51d2d38af2170733eff21a0963e
      size: 10479
